\documentclass[10pt,a4paper,oneside]{book}

\usepackage[slovene]{babel}
\usepackage[utf8x]{inputenc}
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{nag}
\usepackage[margin=1in]{geometry}
\usepackage{enumerate}
\usepackage{verbatim}

\usepackage{listingsutf8}
\lstset{
	tabsize=4,
	basicstyle={\ttfamily \scriptsize},
	identifierstyle={\ttfamily},
	inputencoding=cp1250,
	%barvanje kode
	commentstyle={\sffamily \color[rgb]{0,0.5,0}},
	stringstyle=\color[rgb]{0.5,0,1},
	keywordstyle=\color[rgb]{0,0,1},
	classoffset=0,
	%barvanje kode
	language=Java,
	deletekeywords={true,false},
	deletekeywords={byte,short,int,long,float,double,char,boolean,void},
	classoffset=1,
	morekeywords={byte,short,int,long,float,double,char,boolean,void},
	keywordstyle=\color[rgb]{0.5,0,1},
	%iz source datotek potegnemo tisto med //@begin@ ...koda... //@end@
	rangeprefix=//@,
	rangesuffix=@,
	linerange=begin-end,
	includerangemarker=false,
	%lomljenje predolgih vrstic
	breaklines=true,
	prebreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	%okvir
	frame=single,
	frameround={t}{t}{t}{t},
	xleftmargin=23pt,
	xrightmargin=4pt,
	framexleftmargin=19pt,
	framerule=0pt,
	%številčenje
	numbers=left,
	firstnumber=1
}

\usepackage[svgnames]{xcolor}
\usepackage{fancybox}
\usepackage{varwidth}
\newcommand\inline[1]{%
\begin{Sbox}{#1}\end{Sbox}%
\colorbox{lightgray}{\TheSbox}%
}
\newcommand\inliney[1]{%
\begin{Sbox}\begin{varwidth}{0.91\textwidth}{#1}\end{varwidth}\end{Sbox}%
\colorbox{lightgray}{\TheSbox}%
}

\newcommand\pic[2]{%
\parbox{1cm}{%
\begin{center}%
\includegraphics[width=#1\textwidth]{#2}%
\end{center}%
}%
}

\newcommand\br{%? any better ideas? check \par
 \ \\ \ \\%
}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    urlcolor=blue,
    pdftitle={gms - Generic Mouse Gestures}
}
\title{gms - Generic Mouse Gestures}

\begin{document}
\begin{titlepage}
\begin{center}
\ \\[3cm]
{\resizebox{15cm}{!}{\Huge gms}}\\[-40pt]
{\huge\bf \ \ \ \ \ \ \ \ \ \ \ Generic Mouse Gestures}\\[4.5cm]
{\Huge\bf Dokumentacija}\ \\[0.35cm]
{\huge \today}\ \\[3cm]
{\huge {\bf Avtorji:}}\\[0.35cm]
{\Large Anže Pečar, Miha Zidar, Matic Potočnik}
\vfill
\end{center}
\end{titlepage}
\tableofcontents
\pagebreak

\chapter{Uvod}
\section{O programu}
\inline{gms} je program za upravljanje računalnika s pomočjo miškinih gest. Ustvarjen je bil v sklopu seminarske naloge za predmet \inline{Operacijski Sistemi 2} na univerzitetnem programu Fakultete za računalništvo in informatiko v Ljubljani. Repozitorij z izvorno kodo je na voljo na: \inline{\url{https://github.com/Smotko/gms}}
\chapter{Navodila za uporabo}
\section{Namestitev}
Prikazana je namestitev na sistem \inline{Ubuntu 11.04 Natty Narwhal}.
\subsection{Odvisnosti}
Program ima nekaj odvisnosti, ki niso pokrite v privzeti namestitvi Ubuntu 11.04.\\
To popravimo z namestitvijo paketov \inline{python-xlib} \inline{lineakd}, ter \inline{git}:\\
\inliney{sudo apt-get install python-xlib lineakd git}
\subsection{Namestitev}
Kot je navada v Ubuntuju, program naložimo v mapo \inline{/usr/local/bin}:\\
\inliney{cd /usr/local/bin\\
sudo git clone git://github.com/Smotko/gms.git}
\br\br
Če program želimo zaganjati iz kjerkoli, moramo njegovo mapo dodati v iskalno pot.\\To naredimo tako, da dodamo naslednji vrstici v datoteko \inline{$\sim$/.bash\_rc}:\\
\inliney{PATH=\$PATH:/usr/local/bin/gms\\
export PATH}

\subsection{Posodabljanje}
Če želimo program kdaj posodobiti, v terminalu zaženemo:\\
\inliney{cd /usr/local/bin/gms\\
sudo git pull}
\section{Uporaba}
\subsection{Zagon}
Za zagon preprosto zaženemo \inline{gms} v terminalu, po želji pa si lahko ustvarimo tudi bližnjico v kakšnem izmed menijev, ali pa program dodamo med programe, ki se zaženejo ob zagonu operacijskega sistema.

\subsection{Uporaba}
Ko program zaženemo, se v zgornji vrstici v kotičku za obveščanju pojavi ikona.\\
\pic{0.9}{./gmsAppindicator.png}\\
S klikom na ikono se odpre meni, s katerim lahko pridemo do nastavitev, podatkov o programu, ali pa zapremo program.
\br
Program nato uporabljamo prek miškinih gest. Podprte so naslednje geste:
\br
\begin{minipage}{6cm}
\begin{itemize}
\item \inline{Gor--Levo}\\
\pic{0.2}{./upleft.png}
\item \inline{Gor}\\
\pic{0.2}{./up.png}
\item \inline{Gor--Desno}\\
\pic{0.2}{./upright.png}
\end{itemize}
\end{minipage}
\begin{minipage}{6cm}
\begin{itemize}
\item \inline{Desno}\\
\pic{0.2}{./right.png}
\br
\item \inline{Levo}\\
\pic{0.2}{./left.png}
\end{itemize}
\end{minipage}
\begin{minipage}{6cm}
\begin{itemize}
\item \inline{Dol-Desno}\\
\pic{0.2}{./downright.png}
\item \inline{Dol}\\
\pic{0.2}{./down.png}
\item \inline{Dol--Levo}\\
\pic{0.2}{./downleft.png}
\end{itemize}
\end{minipage}\\
Akcije, ki se izvedejo po prepoznavi gest so nastavljive (glej \ref{Nastavitve}), obsegajo pa povsem poljubne pritiske tipk tipkovnice. Tako lahko upravljamo z vsakim programom, ki podpira kake bližnjice na tipkovnici, nekatere bližnjice (npr. za zapiranje programov), pa so podprte že s strani operacijskega sistema.
\newpage
\subsection{Nastavitve}\label{Nastavitve}
Do nastavitev pridemo s klikom na ikono v zgornji vrstici in izbiro \inline{Preferences}\\
\pic{0.9}{./gmsAppindicator.png}\\
V oknu z nastavitvami imamo naslednje možnosti:\\
\pic{0.5}{./gmsSettings.png}
\br
S klikom na gumb ob \inline{Set default key} nastavimo, katero tipko je potrebno držati med izvajanjem geste, pri čemer privzeta nastavitev \inline{False} pomeni, nobene.
\br
S \inline{Set mouse button} nastavimo, katero miškino tipko je potrebno držati med izvajanjem geste.
\br
S klikom na \inline{Config gestures} pa se odpre okno, z nastavitvami akcij.\br
\pic{0.9}{./gmsKeys2.png}\\
V tem oknu nastavimo, katera akcija se bo izvedla ob kateri gesti, lahko pa dodamo tudi posebne nastavitve za posamezne programe, ki imajo morda svoje bližnjice, katere jih želimo uporabiti.
\chapter{Tehnična zasnova}
Program gms je napisan v programskem jeziku \inline{Python}. Za uporabniški vmesnik nastavitev je uporabljeno ogrodje \inline{GTK}, za dodajanje ikone v kotiček za obveščanje je uporabiljen \inline{IndicatorApplet}, za zajemanje premikov miške in tipk tipkovnice in tudi za izvajanje akcij, pa smo uporabili knjižnico \inline{Xlib}. Za prepoznavanje miškinih gest smo uporabili lasten algoritem.
\br
Za \inline{Python} smo se odločili, ker kljub svoji visoko-nivojski naravi, prek množice knjižnic, omogoča dostop do nizko-nivojskih dogajanj operacijskega sistema. Knjižnica, ki smo jo za implementacijo najbolj potrebovali je \inline{Xlib} -- z njo je implementirano tako zajemanje miške in tipkovnice(zajemanje gibanja in pritiska tipk), kot tudi izvajanje akcij (pošiljanje tipk tipkovnice). 
\\[1.5cm]
\pic{0.5}{./logoPython.png}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 
\pic{0.2}{./logoGTK.jpg}\\[1cm]
\. \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \pic{0.25}{./logoX.png}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 
\pic{0.15}{./logoAppindicator.png}
\chapter{Nadaljno delo}
Program se kljub temu, da je že pripravljen za uporabo, širi v praktično vse smeri.\\
Na eni strani lahko napišemo boljši algoritem za prepoznavanje gest, ki bo prepoznaval tudi višje-nivojske geste (npr. gesto \inline{Gor--Dol--Gor--Levo--Desno}). Možno bi bilo zajemati podatke na nižjem nivoju, kar bi omogočalo da preprečimo programu, da bi prejel miškin klik in izvedel privzeto akcijo. Lahko bi poboljšali tudi izvajanje gest, ki so trenutno omejene na pošiljanje tipk tipkovnice, ne pošiljajo pa signalov operacijskemu sistemu naj, npr. minimizira neko okno, ali zažene nek program ali skripto.
\end{document}